<div class="container mt-4">
  <h2>GestiÃ³n de Pacientes</h2>

  <div class="top-bar">
    <input type="text" placeholder="Buscar por ID o nombre..." [(ngModel)]="searchTerm" />
    <button class="btn-add" (click)="openModal()">Inscribir Paciente</button>
  </div>

  <table class="table table-striped align-middle text-center">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Correo</th>
        <th>TelÃ©fono</th>
        <th>DirecciÃ³n</th>
        <th>Fecha de nacimiento</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let paciente of filteredPacientes">
        <td>{{ paciente.idPaciente }}</td>
        <td>{{ paciente.nombrePaciente }}</td>
        <td>{{ paciente.correoPaciente }}</td>
        <td>{{ paciente.telefonoPaciente }}</td>
        <td>{{ paciente.direccionPaciente }}</td>
        <td>{{ paciente.fechaNacimiento | date:'yyyy-MM-dd' }}</td>
        <td>
          <button class="btn btn-sm btn-warning me-2" (click)="openModal(paciente)">âœï¸</button>
          <button class="btn btn-sm btn-danger" *ngIf="paciente.idPaciente" (click)="deletePaciente(paciente.idPaciente)">ğŸ—‘ï¸</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- MODAL -->
  <div class="modal" *ngIf="showModal">
    <div class="modal-content">
      <h3>{{ editMode ? 'Editar Paciente' : 'Inscribir Paciente' }}</h3>
      <form (ngSubmit)="savePaciente()">
        <label>ID Paciente:</label>
        <input type="text" [(ngModel)]="selectedPaciente.idPaciente" name="idPaciente" required [readonly]="editMode" />

        <label>Nombre:</label>
        <input type="text" [(ngModel)]="selectedPaciente.nombrePaciente" name="nombrePaciente" required />

        <label>Correo:</label>
        <input type="email" [(ngModel)]="selectedPaciente.correoPaciente" name="correoPaciente" required />

        <label>TelÃ©fono:</label>
        <input type="text" [(ngModel)]="selectedPaciente.telefonoPaciente" name="telefonoPaciente" required />

        <label>DirecciÃ³n:</label>
        <input type="text" [(ngModel)]="selectedPaciente.direccionPaciente" name="direccionPaciente" required />

        <label>Fecha de nacimiento:</label>
        <input type="date" [(ngModel)]="selectedPaciente.fechaNacimiento" name="fechaNacimiento" required />

        <div class="actions">
          <button type="button" class="btn-cancel" (click)="closeModal()">Cancelar</button>
          <button type="submit" class="btn btn-success">Guardar</button>
        </div>
      </form>
    </div>
  </div>
</div>
