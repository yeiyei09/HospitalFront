<div class="container mt-4">
  <h2>Gesti√≥n de M√©dicos</h2>

  <div class="top-bar">
    <input type="text" placeholder="Buscar por ID o nombre..." [(ngModel)]="searchTerm" />
    <button class="btn-add" (click)="openModal()">Inscribir medico</button>
  </div>

  <div class="table-responsive">
    <table class="table table-striped align-middle text-center">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Correo</th>
          <th>Tel√©fono</th>
          <th>Especialidad</th>
          <th>N¬∞ Colegiatura</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let medico of filteredMedicos">
          <td>{{ medico.idMedico }}</td>
          <td>{{ medico.nombreMedico }}</td>
          <td>{{ medico.correoMedico }}</td>
          <td>{{ medico.telefonoMedico }}</td>
          <td>{{ medico.especialidad }}</td>
          <td>{{ medico.numeroColegiatura }}</td>
          <td>
            <button class="btn btn-sm btn-warning me-2" (click)="openModal(medico)">‚úèÔ∏è</button>
            <button class="btn btn-sm btn-danger" (click)="deleteMedico(medico.idMedico)">üóëÔ∏è</button>
          </td>
        </tr>
        <tr *ngIf="filteredMedicos.length === 0">
          <td colspan="7" class="text-muted">No se encontraron m√©dicos.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal -->
  <div class="modal" *ngIf="showModal">
    <div class="modal-container">
      <div class="modal-content">
        <h3> {{ editMode ? 'Editar M√©dico' : 'Agregar M√©dico' }}</h3>
        <form (ngSubmit)="saveMedico()" #form="ngForm">
          <div class="mb-3">
            <label for="idMedico" class="form-label">ID M√©dico</label>
            <input
              type="text"
              id="idMedico"
              class="form-control"
              [(ngModel)]="selectedMedico.idMedico"
              name="idMedico"
              required
              [readonly]="editMode"
            />
          </div>

          <div class="mb-3">
            <label for="nombreMedico" class="form-label">Nombre</label>
            <input
              type="text"
              id="nombreMedico"
              class="form-control"
              [(ngModel)]="selectedMedico.nombreMedico"
              name="nombreMedico"
              required
            />
          </div>

          <div class="mb-3">
            <label for="correoMedico" class="form-label">Correo</label>
            <input
              type="email"
              id="correoMedico"
              class="form-control"
              [(ngModel)]="selectedMedico.correoMedico"
              name="correoMedico"
            />
          </div>

          <div class="mb-3">
            <label for="telefonoMedico" class="form-label">Tel√©fono</label>
            <input
              type="text"
              id="telefonoMedico"
              class="form-control"
              [(ngModel)]="selectedMedico.telefonoMedico"
              name="telefonoMedico"
            />
          </div>

          <div class="mb-3">
            <label for="especialidad" class="form-label">Especialidad</label>
            <input
              type="text"
              id="especialidad"
              class="form-control"
              [(ngModel)]="selectedMedico.especialidad"
              name="especialidad"
            />
          </div>

          <div class="mb-3">
            <label for="numeroColegiatura" class="form-label">N√∫mero de Colegiatura</label>
            <input
              type="text"
              id="numeroColegiatura"
              class="form-control"
              [(ngModel)]="selectedMedico.numeroColegiatura"
              name="numeroColegiatura"
            />
          </div>

          <div class="actions">
            <button type="button" class="btn-cancel" (click)="closeModal()">Cancelar</button>
            <button type="submit" class="btn btn-success">
              {{ editMode ? 'Guardar Cambios' : 'Agregar' }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
