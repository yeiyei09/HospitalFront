<div class="container mt-4">
  <h2>Gesti√≥n de M√©dicos</h2>

  <!-- üîπ BARRA PRINCIPAL (b√∫squeda local) -->
  <div class="top-bar">
    <input
      type="text"
      placeholder="Buscar por nombre o c√©dula..."
      [(ngModel)]="searchTerm"
    />
    <button class="btn-add" (click)="openModal()">Inscribir M√©dico</button>
  </div>

  <!-- üîπ B√öSQUEDA POR ID (real al backend) -->
  <div class="search-id-bar">
    <input
      type="text"
      placeholder="Ingrese el ID del m√©dico..."
      [(ngModel)]="searchId"
    />
    <button class="btn-id-search" (click)="buscarPorId()">Buscar por ID</button>
    <button class="btn-view-all" (click)="verTodos()">Ver todos</button>
  </div>

  <!-- üîπ TABLA -->
  <div class="table-responsive">
    <table class="table table-striped align-middle text-center">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>C√©dula</th>
          <th>Correo</th>
          <th>Tel√©fono</th>
          <th>Especializaci√≥n</th>
          <th>N¬∞ Colegiatura</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let medico of filteredMedicos">
          <td>{{ medico.idMedico }}</td>
          <td>{{ medico.nombreMedico }}</td>
          <td>{{ medico.cedulaMedico }}</td>
          <td>{{ medico.correoMedico }}</td>
          <td>{{ medico.telefonoMedico }}</td>
          <td>{{ medico.especializacion }}</td>
          <td>{{ medico.numeroColegiatura }}</td>
          <td>
            <button
              class="btn btn-sm btn-warning me-2"
              (click)="openModal(medico)"
            >
              ‚úèÔ∏è
            </button>
            <button
              class="btn btn-sm btn-danger"
              (click)="deleteMedico(medico.idMedico)"
            >
              üóëÔ∏è
            </button>
          </td>
        </tr>
        <tr *ngIf="filteredMedicos.length === 0">
          <td colspan="8" class="text-muted">No se encontraron m√©dicos.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- üîπ PAGINADO -->
  <nav class="pagination-container" *ngIf="medicos.length">
    <ul class="pagination">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <button
          class="page-link"
          (click)="prevPage()"
          [disabled]="currentPage === 1"
        >
          ‚¨ÖÔ∏è Anterior
        </button>
      </li>

      <li class="page-item active">
        <span class="page-link">P√°gina {{ currentPage }}</span>
      </li>

      <li class="page-item">
        <button class="page-link" (click)="nextPage()">Siguiente ‚û°Ô∏è</button>
      </li>
    </ul>
  </nav>

  <!-- üîπ MODAL -->
  <div class="modal" *ngIf="showModal">
    <div class="modal-content">
      <h3>{{ editMode ? 'Editar M√©dico' : 'Inscribir M√©dico' }}</h3>

      <form (ngSubmit)="saveMedico()" #form="ngForm">
        <label>Nombre:</label>
        <input
          type="text"
          [(ngModel)]="selectedMedico.nombreMedico"
          name="nombreMedico"
          required
        />

        <label>C√©dula:</label>
        <input
          type="text"
          [(ngModel)]="selectedMedico.cedulaMedico"
          name="cedulaMedico"
        />

        <label>Correo:</label>
        <input
          type="email"
          [(ngModel)]="selectedMedico.correoMedico"
          name="correoMedico"
          required
        />

        <label>Tel√©fono:</label>
        <input
          type="text"
          [(ngModel)]="selectedMedico.telefonoMedico"
          name="telefonoMedico"
        />

        <label>Especializaci√≥n:</label>
        <input
          type="text"
          [(ngModel)]="selectedMedico.especializacion"
          name="especializacion"
        />

        <label>N√∫mero de Colegiatura:</label>
        <input
          type="text"
          [(ngModel)]="selectedMedico.numeroColegiatura"
          name="numeroColegiatura"
        />

        <div class="actions">
          <button type="button" class="btn-cancel" (click)="closeModal()">
            Cancelar
          </button>
          <button type="submit" class="btn btn-success">
            {{ editMode ? 'Guardar Cambios' : 'Guardar' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>